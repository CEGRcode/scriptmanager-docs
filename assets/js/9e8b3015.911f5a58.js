"use strict";(self.webpackChunkscriptmanager_docs=self.webpackChunkscriptmanager_docs||[]).push([[4612],{5680:(e,a,t)=>{t.d(a,{xA:()=>d,yg:()=>m});var r=t(6540);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,r,o=function(e,a){if(null==e)return{};var t,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),c=function(e){var a=r.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},d=function(e){var a=c(e.components);return r.createElement(s.Provider,{value:a},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},p=r.forwardRef((function(e,a){var t=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),g=c(t),p=o,m=g["".concat(s,".").concat(p)]||g[p]||u[p]||n;return t?r.createElement(m,i(i({ref:a},d),{},{components:t})):r.createElement(m,i({ref:a},d))}));function m(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var n=t.length,i=new Array(n);i[0]=p;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[g]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<n;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},9365:(e,a,t)=>{t.d(a,{A:()=>i});var r=t(6540),o=t(53);const n={tabItem:"tabItem_Ymn6"};function i(e){let{children:a,hidden:t,className:i}=e;return r.createElement("div",{role:"tabpanel",className:(0,o.A)(n.tabItem,i),hidden:t},a)}},1470:(e,a,t)=>{t.d(a,{A:()=>T});var r=t(8168),o=t(6540),n=t(53),i=t(3104),l=t(6347),s=t(7485),c=t(1682),d=t(9466);function g(e){return function(e){return o.Children.map(e,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:a,label:t,attributes:r,default:o}}=e;return{value:a,label:t,attributes:r,default:o}}))}function u(e){const{values:a,children:t}=e;return(0,o.useMemo)((()=>{const e=a??g(t);return function(e){const a=(0,c.X)(e,((e,a)=>e.value===a.value));if(a.length>0)throw new Error(`Docusaurus error: Duplicate values "${a.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[a,t])}function p(e){let{value:a,tabValues:t}=e;return t.some((e=>e.value===a))}function m(e){let{queryString:a=!1,groupId:t}=e;const r=(0,l.W6)(),n=function(e){let{queryString:a=!1,groupId:t}=e;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:a,groupId:t});return[(0,s.aZ)(n),(0,o.useCallback)((e=>{if(!n)return;const a=new URLSearchParams(r.location.search);a.set(n,e),r.replace({...r.location,search:a.toString()})}),[n,r])]}function h(e){const{defaultValue:a,queryString:t=!1,groupId:r}=e,n=u(e),[i,l]=(0,o.useState)((()=>function(e){let{defaultValue:a,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!p({value:a,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${a}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return a}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:a,tabValues:n}))),[s,c]=m({queryString:t,groupId:r}),[g,h]=function(e){let{groupId:a}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(a),[r,n]=(0,d.Dv)(t);return[r,(0,o.useCallback)((e=>{t&&n.set(e)}),[t,n])]}({groupId:r}),y=(()=>{const e=s??g;return p({value:e,tabValues:n})?e:null})();(0,o.useLayoutEffect)((()=>{y&&l(y)}),[y]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!p({value:e,tabValues:n}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),h(e)}),[c,h,n]),tabValues:n}}var y=t(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:a,block:t,selectedValue:l,selectValue:s,tabValues:c}=e;const d=[],{blockElementScrollPositionUntilNextRender:g}=(0,i.a_)(),u=e=>{const a=e.currentTarget,t=d.indexOf(a),r=c[t].value;r!==l&&(g(a),s(r))},p=e=>{let a=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;a=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;a=d[t]??d[d.length-1];break}}a?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":t},a)},c.map((e=>{let{value:a,label:t,attributes:i}=e;return o.createElement("li",(0,r.A)({role:"tab",tabIndex:l===a?0:-1,"aria-selected":l===a,key:a,ref:e=>d.push(e),onKeyDown:p,onClick:u},i,{className:(0,n.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":l===a})}),t??a)})))}function v(e){let{lazy:a,children:t,selectedValue:r}=e;if(t=Array.isArray(t)?t:[t],a){const e=t.find((e=>e.props.value===r));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},t.map(((e,a)=>(0,o.cloneElement)(e,{key:a,hidden:e.props.value!==r}))))}function w(e){const a=h(e);return o.createElement("div",{className:(0,n.A)("tabs-container",f.tabList)},o.createElement(b,(0,r.A)({},e,a)),o.createElement(v,(0,r.A)({},e,a)))}function T(e){const a=(0,y.A)();return o.createElement(w,(0,r.A)({key:String(a)},e))}},7313:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>g,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>u});var r=t(8168),o=(t(6540),t(5680)),n=t(1470),i=t(9365),l=t(5489);const s={id:"genome-tracks-tutorial",title:"Making Genome Tracks Tutorial",sidebar_label:"Genome Tracks (BigWig)"},c=void 0,d={unversionedId:"Guides/Tutorials/genome-tracks-tutorial",id:"Guides/Tutorials/genome-tracks-tutorial",title:"Making Genome Tracks Tutorial",description:"How to turn your BAM files into genome track files that can be viewed in a genome browser",source:"@site/docs/Guides/Tutorials/genome-tracks-tutorial.md",sourceDirName:"Guides/Tutorials",slug:"/Guides/Tutorials/genome-tracks-tutorial",permalink:"/scriptmanager-docs/docs/Guides/Tutorials/genome-tracks-tutorial",draft:!1,tags:[],version:"current",lastUpdatedBy:"Olivia Wen-Mei Lang",lastUpdatedAt:1697064046,formattedLastUpdatedAt:"Oct 11, 2023",frontMatter:{id:"genome-tracks-tutorial",title:"Making Genome Tracks Tutorial",sidebar_label:"Genome Tracks (BigWig)"},sidebar:"generalSidebar",previous:{title:"Genomic Features",permalink:"/scriptmanager-docs/docs/Guides/Tutorials/genomic-features-tutorial"},next:{title:"ATAC-seq",permalink:"/scriptmanager-docs/docs/Guides/Tutorials/atac-seq-tutorial"}},g={},u=[{value:"Download ScriptManager (v0.14):",id:"download-scriptmanager-v014",level:2},{value:"Download USCS binary <code>bedGraphToBigWig</code>",id:"download-uscs-binary-bedgraphtobigwig",level:2},{value:"Download data",id:"download-data",level:2},{value:"BAM File",id:"bam-file",level:3},{value:"XXXX.chrom.sizes Reference File",id:"xxxxchromsizes-reference-file",level:3},{value:"Generate the Genome Tracks",id:"generate-the-genome-tracks",level:2},{value:"1. Open ScriptManager",id:"1-open-scriptmanager",level:3},{value:"2. Create a whole-genome pileup using BAM Format Converter Tools",id:"2-create-a-whole-genome-pileup-using-bam-format-converter-tools",level:3},{value:"2.1. Navigate to BAM Format Converter \u27a1\ufe0f BAM to scIDX to do a genome-wide pileup of your BAM",id:"21-navigate-to-bam-format-converter-\ufe0f-bam-to-scidx-to-do-a-genome-wide-pileup-of-your-bam",level:4},{value:"2.2. Select Encoding information",id:"22-select-encoding-information",level:4},{value:"2.3. Execute pileup",id:"23-execute-pileup",level:4},{value:"3. (Optional) Normalize the genome track",id:"3-optional-normalize-the-genome-track",level:3},{value:"3.1. Navigate to Read Analysis \u27a1\ufe0f Calculate Scaling Factor to calculate a scaling factor",id:"31-navigate-to-read-analysis-\ufe0f-calculate-scaling-factor-to-calculate-a-scaling-factor",level:4},{value:"3.2. Select the BAM file you want to create the data track from",id:"32-select-the-bam-file-you-want-to-create-the-data-track-from",level:4},{value:"3.3. Select a normalization method and execute",id:"33-select-a-normalization-method-and-execute",level:4},{value:"3.4. Navigate to Read Analysis \u27a1\ufe0f Scale Matrix to apply the normalization to the data track",id:"34-navigate-to-read-analysis-\ufe0f-scale-matrix-to-apply-the-normalization-to-the-data-track",level:4},{value:"3.2. Input the normalization factor and adjust the start row to 2",id:"32-input-the-normalization-factor-and-adjust-the-start-row-to-2",level:4},{value:"3.3. Load the file and execute matrix scaling",id:"33-load-the-file-and-execute-matrix-scaling",level:4},{value:"4. Convert scIDX to BigWig",id:"4-convert-scidx-to-bigwig",level:3},{value:"4.1. Turn your scIDX file into a bedGraph file",id:"41-turn-your-scidx-file-into-a-bedgraph-file",level:4},{value:"4.2. Turn your bedGraph file into a BigWig file",id:"42-turn-your-bedgraph-file-into-a-bigwig-file",level:4},{value:"4.3. Load the BigWig into your favorite genome browser",id:"43-load-the-bigwig-into-your-favorite-genome-browser",level:4},{value:"Command-Line shell script",id:"command-line-shell-script",level:2}],p={toc:u},m="wrapper";function h(e){let{components:a,...s}=e;return(0,o.yg)(m,(0,r.A)({},p,s,{components:a,mdxType:"MDXLayout"}),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"How to turn your BAM files into genome track files that can be viewed in a genome browser")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Goal:")," This tutorial provides a guide to transforming and filtering your ChIP-exo alignment data into files that can be uploaded by a genome browser."),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(1466).A,style:{width:"100%"}})),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"\u2757 ",(0,o.yg)("strong",{parentName:"p"}," BigWig Warning "),"\u2757\nBe careful about performing analysis steps using BigWig files instead of BAM files. BigWigs are excellent for visualizing data pileups in a genome browser but if you are processing data, we recommend you process data directly from BAM formats. From a information content and reproducibility standpoint, BAM files have notable advantages over BigWigs. ",(0,o.yg)("a",{parentName:"p",href:"/docs/Guides/Contributing/developer-guidelines#scriptmanager-design-principles"},"Read more about some of these advantages"))),(0,o.yg)("p",null,"This tutorial is based on the processing script from ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/CEGRcode/2022-Mittal_SAGA/blob/main/03_Bulk_Processing/job/bulk_geo_tracks.pbs"},"Mittal et al, 2022")," to turn BAM files into BigWig tracks ",(0,o.yg)("strong",{parentName:"p"},"with base-pair resolution for high resolution assays"),"."),(0,o.yg)("p",null,"There will be a couple steps that need to be performed on the command line using UCSC binaries because we currently don't have a parser for BigWig files (in the works but not ready yet). In the meantime, here are the step-by-step instructions for using as much of ScriptManager's GUI as possible to generate the BigWig track."),(0,o.yg)("h2",{id:"download-scriptmanager-v014"},"Download ScriptManager (v0.14):"),(0,o.yg)("p",null,"The current version of ScriptManager is available for download ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("a",{parentName:"strong",href:"https://github.com/CEGRcode/scriptmanager/releases/download/v0.14/ScriptManager-v0.14.jar"},"here")),". Make sure you have ",(0,o.yg)("a",{parentName:"p",href:"/docs/#java"},"Java installed"),"."),(0,o.yg)("p",null,"The file ",(0,o.yg)("inlineCode",{parentName:"p"},"ScriptManager-v0.14.jar")," should be placed someplace locally accessible. For example on Mac OS on the Desktop (Permissions will need to be accepted) or someplace in your home directory (i.e. Macintosh HD/Users/userID/ScriptManager)"),(0,o.yg)("h2",{id:"download-uscs-binary-bedgraphtobigwig"},"Download USCS binary ",(0,o.yg)("inlineCode",{parentName:"h2"},"bedGraphToBigWig")),(0,o.yg)("p",null,"You will need to download the precompiled binary for converting bedGraphs to BigWig files. Navigate to ",(0,o.yg)("a",{parentName:"p",href:"https://hgdownload.soe.ucsc.edu/admin/exe/"},"UCSC executables FTP"),". Click the link to the OS that matches your machine and scroll down to download the ",(0,o.yg)("inlineCode",{parentName:"p"},"bedGraphToBigWig")," binary."),(0,o.yg)(n.A,{mdxType:"Tabs"},(0,o.yg)(i.A,{value:"linux-macos",label:"Linux/MacOS",default:!0,mdxType:"TabItem"},(0,o.yg)("p",null,"Make sure you modify the permissions so that you can execute the binary. You can do this with ",(0,o.yg)("inlineCode",{parentName:"p"},"chmod")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"chmod 755 /path/to/bedGraphToBigWig\n")),(0,o.yg)("p",null,"For example, if your ",(0,o.yg)("inlineCode",{parentName:"p"},"bedGraphToBigWig")," binary downloaded to your ",(0,o.yg)("inlineCode",{parentName:"p"},"Downloads")," folder,"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"chmod 755 ~/Downloads/bedGraphToBigWig\n")))),(0,o.yg)("h2",{id:"download-data"},"Download data"),(0,o.yg)("p",null,"You need one file of sequencing data alignments (BAM) to complete this exercise and a file with the sacCer3 yeast reference genome chromosome sizes (",(0,o.yg)("inlineCode",{parentName:"p"},"chrom.sizes"),"). ",(0,o.yg)("a",{parentName:"p",href:"/docs/Guides/Getting-Started/file-formats"},"Read more about the BAM file format here.")),(0,o.yg)("h3",{id:"bam-file"},"BAM File"),(0,o.yg)("p",null,"This is the set of Reb1 read alignments from the Yeast Epigenome Project (YEP). ",(0,o.yg)("a",{parentName:"p",href:"https://pubmed.ncbi.nlm.nih.gov/33692541/"},"See Rossi et al (2021)")," for more details."),(0,o.yg)(l.A,{className:"button button--secondary",href:"ftp://data1.commons.psu.edu/pub/commons/eberly/pughlab/yeast-epigenome-project/12141_YEP.zip",mdxType:"Link"},"Download sample BAM file"),(0,o.yg)("p",null,"OR"),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(80).A,style:{width:"60%"}})),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"Navigate to ",(0,o.yg)("a",{parentName:"li",href:"http://www.yeastepigenome.org/"},"www.yeastepigenome.org")," and search for Reb1"),(0,o.yg)("li",{parentName:"ol"},'Select "META DATA"'),(0,o.yg)("li",{parentName:"ol"},'Select "Direct Download"'),(0,o.yg)("li",{parentName:"ol"},"Unzip the resulting file \u201812141_YEP.zip\u2019 and inspect the contents of the new ",(0,o.yg)("inlineCode",{parentName:"li"},"12141_YEP")," folder. It should contain a file called ",(0,o.yg)("inlineCode",{parentName:"li"},"12141_filtered.bam"),".")),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(3633).A,style:{width:"50%"}}),(0,o.yg)("img",{src:t(2047).A,style:{width:"50%"}})),(0,o.yg)("h3",{id:"xxxxchromsizes-reference-file"},"XXXX.chrom.sizes Reference File"),(0,o.yg)("p",null,"You will also need the chromosome sizes file of the yeast reference genome (sacCer3):"),(0,o.yg)(l.A,{className:"button button--secondary",href:"https://hgdownload.soe.ucsc.edu/goldenPath/sacCer3/bigZips/sacCer3.chrom.sizes",mdxType:"Link"},"Download sacCer3.chrom.sizes (TXT)"),(0,o.yg)("br",null),(0,o.yg)("br",null),(0,o.yg)("admonition",{type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"The downloaded sacCer3.chrom.sizes file may be using the roman numeral naming system (",(0,o.yg)("inlineCode",{parentName:"p"},"chrI chrII chrIII ..."),"). You will need to modify this to the arabic (",(0,o.yg)("inlineCode",{parentName:"p"},"chr1 chr2 chr3 ..."),") numeral naming system if you plan to use the BAM file linked above. You can do this in a simple text editor."),(0,o.yg)("p",{parentName:"admonition"},"Also, if the file is missing the ",(0,o.yg)("inlineCode",{parentName:"p"},"2-micron")," row, you will need to add it manually. Simply append the following tab-delimited row to the bottom of the ",(0,o.yg)("inlineCode",{parentName:"p"},"sacCer3.chrom.sizes")," file."),(0,o.yg)("pre",{parentName:"admonition"},(0,o.yg)("code",{parentName:"pre"},"2-micron    6318\n"))),(0,o.yg)("h2",{id:"generate-the-genome-tracks"},"Generate the Genome Tracks"),(0,o.yg)("h3",{id:"1-open-scriptmanager"},"1. Open ScriptManager"),(0,o.yg)(n.A,{mdxType:"Tabs"},(0,o.yg)(i.A,{value:"macos",label:"MacOS",default:!0,mdxType:"TabItem"},(0,o.yg)("p",null,"Depending on your system permissions, you may need to be an administrator to open this for the first time. On Mac systems, this can be done by right-clicking the file and selecting \u2018Open\u2019 at the top."),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(6176).A,style:{width:"40%",border:"solid 1px"}})),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"Some MacOS systems may not properly open the JAR by simply double-clicking on the JAR file so you may need to open your Terminal window and execute it from the command line by executing the jar file ",(0,o.yg)("em",{parentName:"p"},"without any arguments or flags"),":"),(0,o.yg)("pre",{parentName:"admonition"},(0,o.yg)("code",{parentName:"pre"},"java -jar /path/to/ScriptManager.jar\n")),(0,o.yg)("p",{parentName:"admonition"},"If you're not sure how to type the path to ScriptManager, you can type ",(0,o.yg)("inlineCode",{parentName:"p"},"java -jar ")," (end with space) and then drag ScriptManager from Finder into your Terminal window and then press enter."))),(0,o.yg)(i.A,{value:"linux",label:"Linux",mdxType:"TabItem"},(0,o.yg)("p",null,"Double-click or right-click the ScriptManager JAR file to start the program."),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(2692).A,style:{width:"40%",border:"solid 1px"}}))),(0,o.yg)(i.A,{value:"windows",label:"Windows",mdxType:"TabItem"},(0,o.yg)("p",null,"Double-click or right-click the ScriptManager JAR file to start the program."),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(3630).A,style:{width:"40%",border:"solid 1px"}})))),(0,o.yg)("p",null,"Once you see the main tool selection window, you're off to the races!"),(0,o.yg)("h3",{id:"2-create-a-whole-genome-pileup-using-bam-format-converter-tools"},"2. Create a whole-genome pileup using BAM Format Converter Tools"),(0,o.yg)("h4",{id:"21-navigate-to-bam-format-converter-\ufe0f-bam-to-scidx-to-do-a-genome-wide-pileup-of-your-bam"},"2.1. Navigate to BAM Format Converter \u27a1\ufe0f ",(0,o.yg)("a",{parentName:"h4",href:"/docs/Tools/bam-format-converter/bam-to-scidx"},(0,o.yg)("strong",{parentName:"a"},"BAM to scIDX"))," to do a genome-wide pileup of your BAM"),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(4564).A,style:{width:"60%"}})),(0,o.yg)("h4",{id:"22-select-encoding-information"},"2.2. Select Encoding information"),(0,o.yg)("p",null,"Since this is a ChIP-exo dataset, we will select Read 1 (5' end) for the encoding. You may select insert size filters if you wish."),(0,o.yg)("h4",{id:"23-execute-pileup"},"2.3. Execute pileup"),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(5059).A,style:{width:"60%"}}),(0,o.yg)("i",{class:"fa-solid fa-arrow-right fa-lg"}),(0,o.yg)("img",{src:t(6509).A,style:{width:"40%"}})),(0,o.yg)("p",null,"This should output a ",(0,o.yg)("inlineCode",{parentName:"p"},"12141_filtered_READ1.tab")," file."),(0,o.yg)("h3",{id:"3-optional-normalize-the-genome-track"},"3. (Optional) Normalize the genome track"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Skip this if you would like to make a track of the raw read counts.")),(0,o.yg)("p",null,'ScriptManager includes a "Calculate Scaling Factor" tool under the "Read Analysis" tool group that can calculate scaling factors based on several methodologies including total tag normalization and the Normalization of ChIP-seq (NCIS) protocol. ',(0,o.yg)("a",{parentName:"p",href:"/docs/Tools/read-analysis/scaling-factor"},"Read more in the docs.")," Please be sure to check that your ",(0,o.yg)("a",{parentName:"p",href:"/docs/Tools/read-analysis/scaling-factor#"},"normalization method is appropriate")," for your data."),(0,o.yg)("h4",{id:"31-navigate-to-read-analysis-\ufe0f-calculate-scaling-factor-to-calculate-a-scaling-factor"},"3.1. Navigate to Read Analysis \u27a1\ufe0f ",(0,o.yg)("a",{parentName:"h4",href:"/docs/Tools/read-analysis/scaling-factor"},(0,o.yg)("strong",{parentName:"a"},"Calculate Scaling Factor"))," to calculate a scaling factor"),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(3970).A,style:{width:"60%"}})),(0,o.yg)("h4",{id:"32-select-the-bam-file-you-want-to-create-the-data-track-from"},"3.2. Select the BAM file you want to create the data track from"),(0,o.yg)("h4",{id:"33-select-a-normalization-method-and-execute"},"3.3. Select a normalization method and execute"),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(7599).A,style:{width:"60%"}}),(0,o.yg)("i",{class:"fa-solid fa-arrow-right fa-lg"}),(0,o.yg)("div",null,(0,o.yg)("img",{src:t(8209).A}),(0,o.yg)("img",{src:t(6326).A}))),(0,o.yg)("p",null,"For this BAM file, the total tag method gives a scaling factor of ",(0,o.yg)("inlineCode",{parentName:"p"},"9.562259045426815"),"."),(0,o.yg)("h4",{id:"34-navigate-to-read-analysis-\ufe0f-scale-matrix-to-apply-the-normalization-to-the-data-track"},"3.4. Navigate to Read Analysis \u27a1\ufe0f ",(0,o.yg)("a",{parentName:"h4",href:"/docs/Tools/read-analysis/scale-matrix"},(0,o.yg)("strong",{parentName:"a"},"Scale Matrix"))," to apply the normalization to the data track"),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(9661).A,style:{width:"60%"}})),(0,o.yg)("h4",{id:"32-input-the-normalization-factor-and-adjust-the-start-row-to-2"},"3.2. Input the normalization factor and adjust the start row to 2"),(0,o.yg)("h4",{id:"33-load-the-file-and-execute-matrix-scaling"},"3.3. Load the file and execute matrix scaling"),(0,o.yg)("p",null,"You will be loading in the scIDX file (not the BAM)."),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(2576).A,style:{width:"60%"}}),(0,o.yg)("i",{class:"fa-solid fa-arrow-right fa-lg"}),(0,o.yg)("img",{src:t(6375).A,style:{width:"40%"}})),(0,o.yg)("p",null,"This should output a ",(0,o.yg)("inlineCode",{parentName:"p"},"12141_filtered_READ1_SCALE.tab")," file."),(0,o.yg)("h3",{id:"4-convert-scidx-to-bigwig"},"4. Convert scIDX to BigWig"),(0,o.yg)("p",null,"Since ScriptManager currently does not support converting BedGraph files to BigWigs, this step must be done in your terminal/on the command-prompt."),(0,o.yg)("h4",{id:"41-turn-your-scidx-file-into-a-bedgraph-file"},"4.1. Turn your scIDX file into a bedGraph file"),(0,o.yg)(n.A,{mdxType:"Tabs"},(0,o.yg)(i.A,{value:"shell",label:"Shell",default:!0,mdxType:"TabItem"},(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"grep -v -f sacCer3.chrom.sizes 12141_filtered_READ1_SCALE.tab > 12141_filtered_READ1_SCALE.filtered.tab\nsed '1d;2d' 12141_filtered_READ1_SCALE.filtered.tab | awk '{OFS=\"\\t\"}{FS=\"\\t\"}{print $1, $2, $2+1, $3}' |sort -k1,1 -k2,2n > 12141_filtered_READ1_SCALE_forward.bedgraph\nsed '1d;2d' 12141_filtered_READ1_SCALE.filtered.tab | awk '{OFS=\"\\t\"}{FS=\"\\t\"}{print $1, $2, $2+1, $4}' |sort -k1,1 -k2,2n > 12141_filtered_READ1_SCALE_reverse.bedgraph\n"))),(0,o.yg)(i.A,{value:"excel",label:"Excel",default:!0,mdxType:"TabItem"},(0,o.yg)("p",null,"Open your file in excel and strip the file of the first two rows:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"#2023-03-10 12:52:40.439;12141_filtered.bam;READ1\nchrom   index   forward reverse value\n")),(0,o.yg)("p",null,"You may also have read mapping to the very edges of the chromosome. These entries will also have to be removed."),(0,o.yg)("p",null,"Then rearrange the columns into BedGraph format by copying them in the following order (3rd column is the value of col2 plus one):"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"12141_filtered_READ1_SCALE_forward.bedGraph"),": col1, col2, (col2 +1), col3"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"12141_filtered_READ1_SCALE_reverse.bedGraph"),": col1, col2, (col2 +1), col4")),(0,o.yg)("p",null,"...and then sort each of them by the first and then the second columns. This format is tab-delimited (not comma-delimited!) so save as a tab-delimited text file. Do not save this as an Excel file format (",(0,o.yg)("inlineCode",{parentName:"p"},".xlsx"),", ",(0,o.yg)("inlineCode",{parentName:"p"},".xls"),", etc). This should be a ",(0,o.yg)("inlineCode",{parentName:"p"},".tsv")," or ",(0,o.yg)("inlineCode",{parentName:"p"},".tab")," format."))),(0,o.yg)("h4",{id:"42-turn-your-bedgraph-file-into-a-bigwig-file"},"4.2. Turn your bedGraph file into a BigWig file"),(0,o.yg)(n.A,{mdxType:"Tabs"},(0,o.yg)(i.A,{value:"shell",label:"Shell",default:!0,mdxType:"TabItem"},(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"./bedGraphToBigWig 12141_filtered_READ1_SCALE_forward.bedGraph sacCer3.chrom.sizes my-track-basename_forward.bw\n./bedGraphToBigWig 12141_filtered_READ1_SCALE_reverse.bedGraph sacCer3.chrom.sizes my-track-basename_reverse.bw\n")))),(0,o.yg)("h4",{id:"43-load-the-bigwig-into-your-favorite-genome-browser"},"4.3. Load the BigWig into your ",(0,o.yg)("a",{parentName:"h4",href:"https://software.broadinstitute.org/software/igv/download"},"favorite genome browser")),(0,o.yg)("div",{class:"tutorial-img-flow-container"},(0,o.yg)("img",{src:t(1466).A,style:{width:"80%"}})),(0,o.yg)("p",null,"Tah dah! You've made the genome tracks for a ChIP-exo dataset!"),(0,o.yg)("h2",{id:"command-line-shell-script"},"Command-Line shell script"),(0,o.yg)("p",null,"The following shell commands mirror the manipulations described above to create BigWig genome tracks. This can serve as a template for you to write out your own workflows as bash scripts that execute command-line style ScriptManager."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"SCRIPTMANAGER=/path/to/ScriptManager.jar\nBGTOBW=/path/to/bedGraphToBigWig\nCHRMSZ=/path/to/sacCer3.chrom.sizes\nBAMFILE=/path/to/12141_filtered.bam\nOUTPUT=/path/to/my-track-basename\nFACTOR=9.562259045426815  # calculate this separately\n\n# Index BAM if not already indexed\n[ -f $BAMFILE.bai ] || samtools index $BAMFILE\n# Pileup BAM along whole genome\njava -jar $SCRIPTMANAGER bam-format-converter bam-to-scidx $BAMFILE -o $OUTPUT.raw.tab\n# Only include pileups from chromosomes in the sacCer3.chrom.sizes reference\ngrep -v -f $CHRMSZ $OUTPUT.raw.tab > $OUTPUT.filtered.tab\n# Scale SCIDX output (optional)\njava -jar $SCRIPTMANAGER read-analysis scale-matrix $OUTPUT.filtered.tab -s $FACTOR -r 2 -o $OUTPUT.scaled.tab\n# Convert to forward/reverse Bedgraph tracks\nsed '1d;2d' $OUTPUT.scaled.tab | awk '{OFS=\"\\t\"}{FS=\"\\t\"}{print $1, $2, $2+1, $3}' |sort -k1,1 -k2,2n > $OUTPUT.forward.bedgraph\nsed '1d;2d' $OUTPUT.scaled.tab | awk '{OFS=\"\\t\"}{FS=\"\\t\"}{print $1, $2, $2+1, $4}' |sort -k1,1 -k2,2n > $OUTPUT.reverse.bedgraph\n# Compress to BigWig format\n$BGTOBW $OUTPUT.forward.bedgraph $CHRMSZ $OUTPUT\\_forward.bw\n$BGTOBW $OUTPUT.reverse.bedgraph $CHRMSZ $OUTPUT\\_reverse.bw\n\n# Clean-up\nrm $OUTPUT.raw.tab $OUTPUT.filtered.tab $OUTPUT.scaled.tab $OUTPUT.forward.bedgraph $OUTPUT.reverse.bedgraph\n\n# Output files:\n#  - /path/to/my-track-basename_forward.bw\n#  - /path/to/my-track-basename_reverse.bw\n")))}h.isMDXComponent=!0},80:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/download-yep-home-f975840806150a454e5ec6533fd7fd53.png"},2047:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/download-yep-reb1-metadata-ab2aeca9e2417d0c313723d71a34d85b.png"},3633:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/download-yep-reb1-3dd6db352f8dab08f27e1cad8092367f.png"},6509:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-bamtoscidx-output-ee4852e4db0dbbcab067e03bfe1f8537.png"},5059:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-bamtoscidx-ad3c2db72cce5b6733b0e39637c7a997.png"},6375:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-scalematrix-dialog-4df8e8f3d993fda3cd3422a4d575d7b8.png"},2576:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-scalematrix-02240129e3eefbd76eb286091e1c9d90.png"},6326:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-scalingfactor-dialog-ef95d930872de2663dbe5b30ee40d9a0.png"},8209:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-scalingfactor-output-6a4014ce47e5493129f82fdef3a1bfaa.png"},7599:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/gui-scalingfactor-a34b91e737de24602674d967d44e0901.png"},4564:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/maingui-bamtoscidx-673594bf8e06d0b7074206cda67ec2fb.png"},9661:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/maingui-scalematrix-f62550542d34549096c181a3c9062f5c.png"},3970:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/maingui-scalingfactor-b82954571a684d31b33b299dcfff78a3.png"},1466:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/IGV_BrowserShot-1ff8f8b15497181fcb1800cc6fc746f5.png"},2692:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/LinuxOpenSM-1fe13f9ab9c369dd24c0a67c7ee86f41.png"},6176:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/MacOpenSM-5f0508d59e500792ea199946818706f1.png"},3630:(e,a,t)=>{t.d(a,{A:()=>r});const r=t.p+"assets/images/WindowsOpenSM-ac32d3855e9f0cf632ab34c5c9fc983d.png"}}]);